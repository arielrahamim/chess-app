{"ast":null,"code":"import _regeneratorRuntime from\"/home/mushrambo/projects/eks-chess/chess-front-end/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";import _asyncToGenerator from\"/home/mushrambo/projects/eks-chess/chess-front-end/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _slicedToArray from\"/home/mushrambo/projects/eks-chess/chess-front-end/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import React,{useState,useEffect}from'react';import axios from'axios';import{Alert,Spinner}from'react-bootstrap';import ChessBG from'../../assets/chess_bg_1.jpg';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var _require=require('../Utils/Config'),SERVER_URL=_require.SERVER_URL;function NewPassword(props){var _useState=useState(''),_useState2=_slicedToArray(_useState,2),password=_useState2[0],setPassword=_useState2[1];var _useState3=useState(''),_useState4=_slicedToArray(_useState3,2),confirmPassword=_useState4[0],setConfirmPassword=_useState4[1];var _useState5=useState(''),_useState6=_slicedToArray(_useState5,2),error=_useState6[0],setError=_useState6[1];var _useState7=useState(''),_useState8=_slicedToArray(_useState7,2),message=_useState8[0],setMessage=_useState8[1];var _useState9=useState(true),_useState10=_slicedToArray(_useState9,2),isVerifyingData=_useState10[0],setIsVerifyingData=_useState10[1];var _useState11=useState(false),_useState12=_slicedToArray(_useState11,2),isUrlValid=_useState12[0],setIsUrlValid=_useState12[1];var _useState13=useState(false),_useState14=_slicedToArray(_useState13,2),isLoading=_useState14[0],setIsLoading=_useState14[1];useEffect(function(){var verifyToken=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee(){return _regeneratorRuntime().wrap(function _callee$(_context){while(1)switch(_context.prev=_context.next){case 0:_context.prev=0;_context.next=3;return axios.post(\"\".concat(SERVER_URL,\"/u/confirmResetToken\"),{resetToken:props.match.params.resetToken});case 3:setIsVerifyingData(false);setIsUrlValid(true);_context.next=12;break;case 7:_context.prev=7;_context.t0=_context[\"catch\"](0);if(_context.t0.response&&_context.t0.response.data)setError(_context.t0.response.data.error);setIsVerifyingData(false);setIsUrlValid(false);case 12:case\"end\":return _context.stop();}},_callee,null,[[0,7]]);}));return function verifyToken(){return _ref.apply(this,arguments);};}();verifyToken();},[]);var handleSubmit=/*#__PURE__*/function(){var _ref2=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee2(e){return _regeneratorRuntime().wrap(function _callee2$(_context2){while(1)switch(_context2.prev=_context2.next){case 0:e.preventDefault();setIsLoading(true);_context2.prev=2;_context2.next=5;return axios.post(\"\".concat(SERVER_URL,\"/u/newPassword\"),{password:password,confirmPassword:confirmPassword,resetToken:props.match.params.resetToken});case 5:setMessage('Your Password has been reset');setError('');setIsLoading(false);_context2.next=14;break;case 10:_context2.prev=10;_context2.t0=_context2[\"catch\"](2);if(_context2.t0.response&&_context2.t0.response.data)setError(_context2.t0.response.data.error);setIsLoading(false);case 14:case\"end\":return _context2.stop();}},_callee2,null,[[2,10]]);}));return function handleSubmit(_x){return _ref2.apply(this,arguments);};}();// if reset token is begin verified then show loading spinner\nif(isVerifyingData){return/*#__PURE__*/_jsx(\"div\",{className:\"Spinner\",children:/*#__PURE__*/_jsx(Spinner,{animation:\"border\",variant:\"primary\"})});}// if reset token is not valid then show error message\nif(!isUrlValid){return/*#__PURE__*/_jsx(Alert,{variant:\"warning\",children:error});}return/*#__PURE__*/_jsx(\"div\",{style:{backgroundImage:\"url(\".concat(ChessBG,\")\"),height:'100%'},children:/*#__PURE__*/_jsxs(\"div\",{className:\"card col-lg-3 login-form\",children:[error!==''&&/*#__PURE__*/_jsx(Alert,{variant:\"danger\",children:error}),message!==''&&/*#__PURE__*/_jsx(Alert,{variant:\"success\",children:message}),/*#__PURE__*/_jsxs(\"form\",{onSubmit:handleSubmit,children:[/*#__PURE__*/_jsxs(\"div\",{className:\"form-group\",children:[/*#__PURE__*/_jsx(\"label\",{htmlFor:\"password\",children:\"Password\"}),/*#__PURE__*/_jsx(\"input\",{type:\"password\",className:\"form-control\",id:\"password\",placeholder:\"Enter new password\",onChange:function onChange(e){return setPassword(e.target.value);}})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"form-group\",children:[/*#__PURE__*/_jsx(\"label\",{htmlFor:\"confirmPassword\",children:\"Confirm Password\"}),/*#__PURE__*/_jsx(\"input\",{type:\"password\",className:\"form-control\",id:\"confirmPassword\",placeholder:\"Enter new password\",onChange:function onChange(e){return setConfirmPassword(e.target.value);}})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"LoginButton\",children:[/*#__PURE__*/_jsx(\"div\",{children:/*#__PURE__*/_jsx(\"button\",{type:\"submit\",className:\"btn btn-primary\",disabled:isLoading,children:\"Reset Password\"})}),isLoading&&/*#__PURE__*/_jsx(\"div\",{className:\"LoginSpinner\",children:/*#__PURE__*/_jsx(Spinner,{animation:\"border\",variant:\"primary\"})})]})]})]})});}export default NewPassword;","map":{"version":3,"names":["React","useState","useEffect","axios","Alert","Spinner","ChessBG","jsx","_jsx","jsxs","_jsxs","_require","require","SERVER_URL","NewPassword","props","_useState","_useState2","_slicedToArray","password","setPassword","_useState3","_useState4","confirmPassword","setConfirmPassword","_useState5","_useState6","error","setError","_useState7","_useState8","message","setMessage","_useState9","_useState10","isVerifyingData","setIsVerifyingData","_useState11","_useState12","isUrlValid","setIsUrlValid","_useState13","_useState14","isLoading","setIsLoading","verifyToken","_ref","_asyncToGenerator","_regeneratorRuntime","mark","_callee","wrap","_callee$","_context","prev","next","post","concat","resetToken","match","params","t0","response","data","stop","apply","arguments","handleSubmit","_ref2","_callee2","e","_callee2$","_context2","preventDefault","_x","className","children","animation","variant","style","backgroundImage","height","onSubmit","htmlFor","type","id","placeholder","onChange","target","value","disabled"],"sources":["/home/mushrambo/projects/eks-chess/chess-front-end/src/components/Auth/NewPassword.js"],"sourcesContent":["import React, { useState, useEffect } from 'react';\nimport axios from 'axios';\nimport { Alert, Spinner } from 'react-bootstrap';\nimport ChessBG from '../../assets/chess_bg_1.jpg';\nconst { SERVER_URL } = require('../Utils/Config');\n\nfunction NewPassword(props) {\n    const [password, setPassword] = useState('');\n    const [confirmPassword, setConfirmPassword] = useState('');\n    const [error, setError] = useState('');\n    const [message, setMessage] = useState('');\n    const [isVerifyingData, setIsVerifyingData] = useState(true);\n    const [isUrlValid, setIsUrlValid] = useState(false);\n    const [isLoading, setIsLoading] = useState(false);\n\n    useEffect(() => {\n        const verifyToken = async () => {\n            try {\n                // check if reset token is valid(expired or wrong token) or not.\n                await axios.post(`${SERVER_URL}/u/confirmResetToken`, {resetToken: props.match.params.resetToken})      \n                setIsVerifyingData(false);\n                setIsUrlValid(true);\n            } catch (error) {\n                if (error.response && error.response.data)setError(error.response.data.error);\n                setIsVerifyingData(false);\n                setIsUrlValid(false);\n            }\n        }\n        verifyToken();\n    }, [])\n\n    const handleSubmit = async (e) => {\n        e.preventDefault();\n        setIsLoading(true);\n        try {\n            await axios.post(`${SERVER_URL}/u/newPassword`, { password: password, confirmPassword: confirmPassword, resetToken: props.match.params.resetToken });\n            setMessage('Your Password has been reset')\n            setError('');\n            setIsLoading(false);\n        } catch (error) {\n            if (error.response && error.response.data)setError(error.response.data.error);\n            setIsLoading(false);\n        }\n    };\n\n    // if reset token is begin verified then show loading spinner\n    if (isVerifyingData) {\n        return (\n            <div className='Spinner'>\n                <Spinner animation='border' variant='primary' />\n            </div>\n        );\n    }\n\n    // if reset token is not valid then show error message\n    if ( !isUrlValid ) {\n        return (\n            <Alert variant='warning'>{error}</Alert>\n        )\n    } \n\n    return (\n        <div style={{ backgroundImage: `url(${ChessBG})`, height: '100%' }}>\n            <div className='card col-lg-3 login-form'>\n                {error !== '' && <Alert variant='danger'>{error}</Alert>}\n                {message !== '' && <Alert variant='success'>{message}</Alert>}\n                <form onSubmit={handleSubmit}>\n                    <div className='form-group'>\n                        <label htmlFor='password'>Password</label>\n                        <input\n                            type='password'\n                            className='form-control'\n                            id='password'\n                            placeholder='Enter new password'\n                            onChange={(e) => setPassword(e.target.value)}\n                        />\n                    </div>\n                    <div className='form-group'>\n                        <label htmlFor='confirmPassword'>Confirm Password</label>\n                        <input\n                            type='password'\n                            className='form-control'\n                            id='confirmPassword'\n                            placeholder='Enter new password'\n                            onChange={(e) => setConfirmPassword(e.target.value)}\n                        />\n                    </div>\n                    <div className='LoginButton'>\n                        <div>\n                            <button type='submit' className='btn btn-primary' disabled={isLoading}>\n                                Reset Password\n                            </button>\n                        </div>\n                        {isLoading && (\n                            <div className='LoginSpinner'>\n                                <Spinner animation='border' variant='primary' />\n                            </div>\n                        )}\n                    </div>\n                </form>\n            </div>\n        </div>\n    );\n}\n\nexport default NewPassword;\n"],"mappings":"waAAA,MAAO,CAAAA,KAAK,EAAIC,QAAQ,CAAEC,SAAS,KAAQ,OAAO,CAClD,MAAO,CAAAC,KAAK,KAAM,OAAO,CACzB,OAASC,KAAK,CAAEC,OAAO,KAAQ,iBAAiB,CAChD,MAAO,CAAAC,OAAO,KAAM,6BAA6B,CAAC,OAAAC,GAAA,IAAAC,IAAA,gCAAAC,IAAA,IAAAC,KAAA,yBAClD,IAAAC,QAAA,CAAuBC,OAAO,CAAC,iBAAiB,CAAC,CAAzCC,UAAU,CAAAF,QAAA,CAAVE,UAAU,CAElB,QAAS,CAAAC,WAAWA,CAACC,KAAK,CAAE,CACxB,IAAAC,SAAA,CAAgCf,QAAQ,CAAC,EAAE,CAAC,CAAAgB,UAAA,CAAAC,cAAA,CAAAF,SAAA,IAArCG,QAAQ,CAAAF,UAAA,IAAEG,WAAW,CAAAH,UAAA,IAC5B,IAAAI,UAAA,CAA8CpB,QAAQ,CAAC,EAAE,CAAC,CAAAqB,UAAA,CAAAJ,cAAA,CAAAG,UAAA,IAAnDE,eAAe,CAAAD,UAAA,IAAEE,kBAAkB,CAAAF,UAAA,IAC1C,IAAAG,UAAA,CAA0BxB,QAAQ,CAAC,EAAE,CAAC,CAAAyB,UAAA,CAAAR,cAAA,CAAAO,UAAA,IAA/BE,KAAK,CAAAD,UAAA,IAAEE,QAAQ,CAAAF,UAAA,IACtB,IAAAG,UAAA,CAA8B5B,QAAQ,CAAC,EAAE,CAAC,CAAA6B,UAAA,CAAAZ,cAAA,CAAAW,UAAA,IAAnCE,OAAO,CAAAD,UAAA,IAAEE,UAAU,CAAAF,UAAA,IAC1B,IAAAG,UAAA,CAA8ChC,QAAQ,CAAC,IAAI,CAAC,CAAAiC,WAAA,CAAAhB,cAAA,CAAAe,UAAA,IAArDE,eAAe,CAAAD,WAAA,IAAEE,kBAAkB,CAAAF,WAAA,IAC1C,IAAAG,WAAA,CAAoCpC,QAAQ,CAAC,KAAK,CAAC,CAAAqC,WAAA,CAAApB,cAAA,CAAAmB,WAAA,IAA5CE,UAAU,CAAAD,WAAA,IAAEE,aAAa,CAAAF,WAAA,IAChC,IAAAG,WAAA,CAAkCxC,QAAQ,CAAC,KAAK,CAAC,CAAAyC,WAAA,CAAAxB,cAAA,CAAAuB,WAAA,IAA1CE,SAAS,CAAAD,WAAA,IAAEE,YAAY,CAAAF,WAAA,IAE9BxC,SAAS,CAAC,UAAM,CACZ,GAAM,CAAA2C,WAAW,6BAAAC,IAAA,CAAAC,iBAAA,cAAAC,mBAAA,GAAAC,IAAA,CAAG,SAAAC,QAAA,SAAAF,mBAAA,GAAAG,IAAA,UAAAC,SAAAC,QAAA,iBAAAA,QAAA,CAAAC,IAAA,CAAAD,QAAA,CAAAE,IAAA,SAAAF,QAAA,CAAAC,IAAA,GAAAD,QAAA,CAAAE,IAAA,SAGN,CAAApD,KAAK,CAACqD,IAAI,IAAAC,MAAA,CAAI5C,UAAU,yBAAwB,CAAC6C,UAAU,CAAE3C,KAAK,CAAC4C,KAAK,CAACC,MAAM,CAACF,UAAU,CAAC,CAAC,QAClGtB,kBAAkB,CAAC,KAAK,CAAC,CACzBI,aAAa,CAAC,IAAI,CAAC,CAACa,QAAA,CAAAE,IAAA,iBAAAF,QAAA,CAAAC,IAAA,GAAAD,QAAA,CAAAQ,EAAA,CAAAR,QAAA,aAEpB,GAAIA,QAAA,CAAAQ,EAAA,CAAMC,QAAQ,EAAIT,QAAA,CAAAQ,EAAA,CAAMC,QAAQ,CAACC,IAAI,CAACnC,QAAQ,CAACyB,QAAA,CAAAQ,EAAA,CAAMC,QAAQ,CAACC,IAAI,CAACpC,KAAK,CAAC,CAC7ES,kBAAkB,CAAC,KAAK,CAAC,CACzBI,aAAa,CAAC,KAAK,CAAC,CAAC,yBAAAa,QAAA,CAAAW,IAAA,MAAAd,OAAA,gBAE5B,kBAXK,CAAAL,WAAWA,CAAA,SAAAC,IAAA,CAAAmB,KAAA,MAAAC,SAAA,OAWhB,CACDrB,WAAW,CAAC,CAAC,CACjB,CAAC,CAAE,EAAE,CAAC,CAEN,GAAM,CAAAsB,YAAY,6BAAAC,KAAA,CAAArB,iBAAA,cAAAC,mBAAA,GAAAC,IAAA,CAAG,SAAAoB,SAAOC,CAAC,SAAAtB,mBAAA,GAAAG,IAAA,UAAAoB,UAAAC,SAAA,iBAAAA,SAAA,CAAAlB,IAAA,CAAAkB,SAAA,CAAAjB,IAAA,SACzBe,CAAC,CAACG,cAAc,CAAC,CAAC,CAClB7B,YAAY,CAAC,IAAI,CAAC,CAAC4B,SAAA,CAAAlB,IAAA,GAAAkB,SAAA,CAAAjB,IAAA,SAET,CAAApD,KAAK,CAACqD,IAAI,IAAAC,MAAA,CAAI5C,UAAU,mBAAkB,CAAEM,QAAQ,CAAEA,QAAQ,CAAEI,eAAe,CAAEA,eAAe,CAAEmC,UAAU,CAAE3C,KAAK,CAAC4C,KAAK,CAACC,MAAM,CAACF,UAAW,CAAC,CAAC,QACpJ1B,UAAU,CAAC,8BAA8B,CAAC,CAC1CJ,QAAQ,CAAC,EAAE,CAAC,CACZgB,YAAY,CAAC,KAAK,CAAC,CAAC4B,SAAA,CAAAjB,IAAA,kBAAAiB,SAAA,CAAAlB,IAAA,IAAAkB,SAAA,CAAAX,EAAA,CAAAW,SAAA,aAEpB,GAAIA,SAAA,CAAAX,EAAA,CAAMC,QAAQ,EAAIU,SAAA,CAAAX,EAAA,CAAMC,QAAQ,CAACC,IAAI,CAACnC,QAAQ,CAAC4C,SAAA,CAAAX,EAAA,CAAMC,QAAQ,CAACC,IAAI,CAACpC,KAAK,CAAC,CAC7EiB,YAAY,CAAC,KAAK,CAAC,CAAC,yBAAA4B,SAAA,CAAAR,IAAA,MAAAK,QAAA,iBAE3B,kBAZK,CAAAF,YAAYA,CAAAO,EAAA,SAAAN,KAAA,CAAAH,KAAA,MAAAC,SAAA,OAYjB,CAED;AACA,GAAI/B,eAAe,CAAE,CACjB,mBACI3B,IAAA,QAAKmE,SAAS,CAAC,SAAS,CAAAC,QAAA,cACpBpE,IAAA,CAACH,OAAO,EAACwE,SAAS,CAAC,QAAQ,CAACC,OAAO,CAAC,SAAS,CAAE,CAAC,CAC/C,CAAC,CAEd,CAEA;AACA,GAAK,CAACvC,UAAU,CAAG,CACf,mBACI/B,IAAA,CAACJ,KAAK,EAAC0E,OAAO,CAAC,SAAS,CAAAF,QAAA,CAAEjD,KAAK,CAAQ,CAAC,CAEhD,CAEA,mBACInB,IAAA,QAAKuE,KAAK,CAAE,CAAEC,eAAe,QAAAvB,MAAA,CAASnD,OAAO,KAAG,CAAE2E,MAAM,CAAE,MAAO,CAAE,CAAAL,QAAA,cAC/DlE,KAAA,QAAKiE,SAAS,CAAC,0BAA0B,CAAAC,QAAA,EACpCjD,KAAK,GAAK,EAAE,eAAInB,IAAA,CAACJ,KAAK,EAAC0E,OAAO,CAAC,QAAQ,CAAAF,QAAA,CAAEjD,KAAK,CAAQ,CAAC,CACvDI,OAAO,GAAK,EAAE,eAAIvB,IAAA,CAACJ,KAAK,EAAC0E,OAAO,CAAC,SAAS,CAAAF,QAAA,CAAE7C,OAAO,CAAQ,CAAC,cAC7DrB,KAAA,SAAMwE,QAAQ,CAAEf,YAAa,CAAAS,QAAA,eACzBlE,KAAA,QAAKiE,SAAS,CAAC,YAAY,CAAAC,QAAA,eACvBpE,IAAA,UAAO2E,OAAO,CAAC,UAAU,CAAAP,QAAA,CAAC,UAAQ,CAAO,CAAC,cAC1CpE,IAAA,UACI4E,IAAI,CAAC,UAAU,CACfT,SAAS,CAAC,cAAc,CACxBU,EAAE,CAAC,UAAU,CACbC,WAAW,CAAC,oBAAoB,CAChCC,QAAQ,CAAE,SAAAA,SAACjB,CAAC,QAAK,CAAAlD,WAAW,CAACkD,CAAC,CAACkB,MAAM,CAACC,KAAK,CAAC,EAAC,CAChD,CAAC,EACD,CAAC,cACN/E,KAAA,QAAKiE,SAAS,CAAC,YAAY,CAAAC,QAAA,eACvBpE,IAAA,UAAO2E,OAAO,CAAC,iBAAiB,CAAAP,QAAA,CAAC,kBAAgB,CAAO,CAAC,cACzDpE,IAAA,UACI4E,IAAI,CAAC,UAAU,CACfT,SAAS,CAAC,cAAc,CACxBU,EAAE,CAAC,iBAAiB,CACpBC,WAAW,CAAC,oBAAoB,CAChCC,QAAQ,CAAE,SAAAA,SAACjB,CAAC,QAAK,CAAA9C,kBAAkB,CAAC8C,CAAC,CAACkB,MAAM,CAACC,KAAK,CAAC,EAAC,CACvD,CAAC,EACD,CAAC,cACN/E,KAAA,QAAKiE,SAAS,CAAC,aAAa,CAAAC,QAAA,eACxBpE,IAAA,QAAAoE,QAAA,cACIpE,IAAA,WAAQ4E,IAAI,CAAC,QAAQ,CAACT,SAAS,CAAC,iBAAiB,CAACe,QAAQ,CAAE/C,SAAU,CAAAiC,QAAA,CAAC,gBAEvE,CAAQ,CAAC,CACR,CAAC,CACLjC,SAAS,eACNnC,IAAA,QAAKmE,SAAS,CAAC,cAAc,CAAAC,QAAA,cACzBpE,IAAA,CAACH,OAAO,EAACwE,SAAS,CAAC,QAAQ,CAACC,OAAO,CAAC,SAAS,CAAE,CAAC,CAC/C,CACR,EACA,CAAC,EACJ,CAAC,EACN,CAAC,CACL,CAAC,CAEd,CAEA,cAAe,CAAAhE,WAAW"},"metadata":{},"sourceType":"module","externalDependencies":[]}