{"ast":null,"code":"import _slicedToArray from\"/home/mushrambo/projects/eks-chess/chess-front-end/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import _regeneratorRuntime from\"/home/mushrambo/projects/eks-chess/chess-front-end/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";import _asyncToGenerator from\"/home/mushrambo/projects/eks-chess/chess-front-end/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import React,{useContext,useState}from'react';import axios from'axios';import{useHistory}from'react-router-dom';import UserContext from'../context/UserContext';import ChessBG from'../assets/chess_bg_1.jpg';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var _require=require('./Utils/Config'),SERVER_URL=_require.SERVER_URL;function Home(){var history=useHistory();var User=useContext(UserContext);var handleFriendsGame=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee(){var res;return _regeneratorRuntime().wrap(function _callee$(_context){while(1)switch(_context.prev=_context.next){case 0:_context.next=2;return axios.post(\"\".concat(SERVER_URL,\"/g/create\"),{id:User.user.id,fen:'rnbqkbnr/pppppppp/8/8/8/8/PPPPPPPP/RNBQKBNR w KQkq - 0 1'});case 2:res=_context.sent;history.push(\"/g/\".concat(res.data.gameId));case 4:case\"end\":return _context.stop();}},_callee);}));return function handleFriendsGame(){return _ref.apply(this,arguments);};}();var RandomOpponentJoin=/*#__PURE__*/function(){var _ref2=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee2(){var res,_res;return _regeneratorRuntime().wrap(function _callee2$(_context2){while(1)switch(_context2.prev=_context2.next){case 0:_context2.prev=0;_context2.next=3;return axios.post(\"\".concat(SERVER_URL,\"/g/join-random\"),{id:User.user.id,fen:'rnbqkbnr/pppppppp/8/8/8/8/PPPPPPPP/RNBQKBNR w KQkq - 0 1'});case 3:res=_context2.sent;history.push(\"/g/\".concat(res.data.gameId));_context2.next=23;break;case 7:_context2.prev=7;_context2.t0=_context2[\"catch\"](0);if(!(_context2.t0.response&&_context2.t0.response.status===404)){_context2.next=22;break;}_context2.prev=10;_context2.next=13;return axios.post(\"\".concat(SERVER_URL,\"/g/gen-random\"),{id:User.user.id,fen:'rnbqkbnr/pppppppp/8/8/8/8/PPPPPPPP/RNBQKBNR w KQkq - 0 1'});case 13:_res=_context2.sent;history.push(\"/g/\".concat(_res.data.gameId));_context2.next=20;break;case 17:_context2.prev=17;_context2.t1=_context2[\"catch\"](10);console.error(_context2.t1);case 20:_context2.next=23;break;case 22:// Handle other errors\nconsole.error(_context2.t0);case 23:case\"end\":return _context2.stop();}},_callee2,null,[[0,7],[10,17]]);}));return function RandomOpponentJoin(){return _ref2.apply(this,arguments);};}();var handleComputerGame=/*#__PURE__*/function(){var _ref3=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee3(){return _regeneratorRuntime().wrap(function _callee3$(_context3){while(1)switch(_context3.prev=_context3.next){case 0:history.push(\"/g/computer\");case 1:case\"end\":return _context3.stop();}},_callee3);}));return function handleComputerGame(){return _ref3.apply(this,arguments);};}();var _useState=useState(''),_useState2=_slicedToArray(_useState,2),inputValue=_useState2[0],setInputValue=_useState2[1];var handleInputChange=function handleInputChange(event){setInputValue(event.target.value);};var handleSubmit=function handleSubmit(){// replace client url here with external url for front ends in kuberenets\nvar url=\"/g/\".concat(inputValue);// Redirect the user to the constructed URL\nwindow.location.href=url;};return/*#__PURE__*/_jsxs(\"div\",{id:\"home-page-container\",style:{backgroundImage:\"url(\".concat(ChessBG,\")\")},children:[/*#__PURE__*/_jsxs(\"div\",{id:\"home-left-side\",children:[/*#__PURE__*/_jsx(\"div\",{id:\"home-left-button\",children:/*#__PURE__*/_jsx(\"button\",{type:\"submit\",onClick:handleFriendsGame,className:\"btn btn-primary btn-lg play-game-button\",children:\"Create Room\"})}),/*#__PURE__*/_jsxs(\"div\",{id:\"home-left-button-join\",children:[/*#__PURE__*/_jsx(\"button\",{type:\"submit\",onClick:handleSubmit,className:\"btn btn-secondary btn-lg\",children:\"Join Room\"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",value:inputValue,onChange:handleInputChange,placeholder:\"Enter a value\",className:\"input-box-joingame\"})]})]}),/*#__PURE__*/_jsx(\"div\",{id:\"vertical-line\"}),/*#__PURE__*/_jsxs(\"div\",{id:\"home-right-side\",children:[/*#__PURE__*/_jsx(\"div\",{id:\"home-right-button\",children:/*#__PURE__*/_jsx(\"button\",{type:\"submit\",onClick:handleComputerGame,className:\"btn btn-primary btn-lg play-game-button\",children:\"Play against Computer\"})}),/*#__PURE__*/_jsx(\"div\",{id:\"home-right-button\",children:/*#__PURE__*/_jsx(\"button\",{type:\"submit\",onClick:RandomOpponentJoin,className:\"btn btn-primary btn-lg play-game-button\",children:\"Random opponent\"})})]})]});}export default Home;","map":{"version":3,"names":["React","useContext","useState","axios","useHistory","UserContext","ChessBG","jsx","_jsx","jsxs","_jsxs","_require","require","SERVER_URL","Home","history","User","handleFriendsGame","_ref","_asyncToGenerator","_regeneratorRuntime","mark","_callee","res","wrap","_callee$","_context","prev","next","post","concat","id","user","fen","sent","push","data","gameId","stop","apply","arguments","RandomOpponentJoin","_ref2","_callee2","_res","_callee2$","_context2","t0","response","status","t1","console","error","handleComputerGame","_ref3","_callee3","_callee3$","_context3","_useState","_useState2","_slicedToArray","inputValue","setInputValue","handleInputChange","event","target","value","handleSubmit","url","window","location","href","style","backgroundImage","children","type","onClick","className","onChange","placeholder"],"sources":["/home/mushrambo/projects/eks-chess/chess-front-end/src/components/Home.js"],"sourcesContent":["import React, { useContext, useState } from 'react';\nimport axios from 'axios';\nimport { useHistory } from 'react-router-dom';\nimport UserContext from '../context/UserContext';\nimport ChessBG from '../assets/chess_bg_1.jpg';\nconst { SERVER_URL } = require('./Utils/Config');\n\n  \n\nfunction Home() {\n    const history = useHistory();\n    const User = useContext(UserContext);\n   \n\n    const handleFriendsGame = async () => {\n        // create the game and also pass the starting fen position of chess.\n        const res = await axios.post(`${SERVER_URL }/g/create`, { id: User.user.id, fen: 'rnbqkbnr/pppppppp/8/8/8/8/PPPPPPPP/RNBQKBNR w KQkq - 0 1' });\n        history.push(`/g/${res.data.gameId}`);\n    }\n    \n\n    const RandomOpponentJoin = async () => {\n        try {\n          const res = await axios.post(`${SERVER_URL}/g/join-random`, { id: User.user.id, fen: 'rnbqkbnr/pppppppp/8/8/8/8/PPPPPPPP/RNBQKBNR w KQkq - 0 1' });\n          history.push(`/g/${res.data.gameId}`);\n        } catch (error) {\n          if (error.response && error.response.status === 404) {\n            // Handle the 404 error\n            try {\n            const res = await axios.post(`${SERVER_URL }/g/gen-random`, { id: User.user.id, fen: 'rnbqkbnr/pppppppp/8/8/8/8/PPPPPPPP/RNBQKBNR w KQkq - 0 1' });\n            history.push(`/g/${res.data.gameId}`);\n            } catch (error) {\n              console.error(error);\n            }\n          } else {\n            // Handle other errors\n            console.error(error);\n          }\n        }\n      };\n\n    const handleComputerGame = async () => {\n        history.push(`/g/computer`);\n    }\n    \n    const [inputValue, setInputValue] = useState('');\n\n    const handleInputChange = (event) => {\n    setInputValue(event.target.value);\n        };\n    const handleSubmit = () => {\n     // replace client url here with external url for front ends in kuberenets\n    const url = `/g/${inputValue}`;\n        \n    // Redirect the user to the constructed URL\n    window.location.href = url;\n          };\n\n    return (\n        <div id=\"home-page-container\" style={{backgroundImage: `url(${ChessBG})`}}>\n            <div id=\"home-left-side\">\n                <div id=\"home-left-button\">\n                    <button type=\"submit\" onClick={handleFriendsGame} className=\"btn btn-primary btn-lg play-game-button\">Create Room</button>\n                </div>\n                <div id=\"home-left-button-join\">\n                    <button type=\"submit\" onClick={handleSubmit} className=\"btn btn-secondary btn-lg\">Join Room</button>\n                    <input type=\"text\" value={inputValue} onChange={handleInputChange} placeholder=\"Enter a value\" className=\"input-box-joingame\" />\n                </div>\n            </div>\n            <div id=\"vertical-line\"></div>\n            <div id=\"home-right-side\">\n                <div id=\"home-right-button\">\n                    <button type=\"submit\" onClick={handleComputerGame} className=\"btn btn-primary btn-lg play-game-button\">Play against Computer</button>\n                </div>\n                <div id=\"home-right-button\">\n                    <button type=\"submit\" onClick={RandomOpponentJoin} className=\"btn btn-primary btn-lg play-game-button\">Random opponent</button>\n                </div>\n            </div>\n        </div>\n    )\n}\n\nexport default Home\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}