{"ast":null,"code":"import _regeneratorRuntime from\"/home/mushrambo/projects/eks-chess/chess-front-end/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";import _asyncToGenerator from\"/home/mushrambo/projects/eks-chess/chess-front-end/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _slicedToArray from\"/home/mushrambo/projects/eks-chess/chess-front-end/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import{useState,useEffect}from'react';import{BrowserRouter,Route,Switch,useParams}from'react-router-dom';import axios from'axios';import Header from'./components/Header';import LandingPage from'./components/LandingPage';import Login from'./components/Auth/Login';import ConfirmationPage from'./components/Auth/ConfirmationPage';import Register from'./components/Auth/Register';import NewPassword from'./components/Auth/NewPassword';import ResetPassword from'./components/Auth/ResetPassword';import Game from'./components/Game/Game';import Computer from'./components/Game/Computer';import LeaderBoard from'./components/Game/LeaderBoard';import UserProfile from'./components/User/UserProfile';import MatchHistory from'./components/User/MatchHistory';import UpdateProfile from'./components/User/UpdateProfile';import Rating from'./components/User/Rating';import UserContext from'./context/UserContext';import{Spinner}from'react-bootstrap';import'bootstrap/dist/css/bootstrap.min.css';import'./style.css';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var _require=require('./components/Utils/Config'),SERVER_URL=_require.SERVER_URL;function App(){var _useState=useState({isValid:false,id:undefined,username:undefined,rating:undefined}),_useState2=_slicedToArray(_useState,2),user=_useState2[0],setUser=_useState2[1];var _useState3=useState(true),_useState4=_slicedToArray(_useState3,2),isLoading=_useState4[0],setIsLoading=_useState4[1];useEffect(function(){var checkLoggingStatus=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee(){var token,response;return _regeneratorRuntime().wrap(function _callee$(_context){while(1)switch(_context.prev=_context.next){case 0:_context.prev=0;token=localStorage.getItem('token');_context.next=4;return axios.post(\"\".concat(SERVER_URL,\"/u/verifyToken\"),{token:token});case 4:response=_context.sent;if(response.data.isValid){setUser(function(user){return{isValid:response.data.isValid,id:response.data.id,username:response.data.username,rating:response.data.rating};});}else{// JWT is not valid, remove it from the browser's storage\nlocalStorage.removeItem('token');}setIsLoading(false);_context.next=13;break;case 9:_context.prev=9;_context.t0=_context[\"catch\"](0);setIsLoading(false);localStorage.removeItem('token');case 13:case\"end\":return _context.stop();}},_callee,null,[[0,9]]);}));return function checkLoggingStatus(){return _ref.apply(this,arguments);};}();checkLoggingStatus();},[]);// if user has logged in or not is not verified yet then show loading spinner.\nif(isLoading){return/*#__PURE__*/_jsx(\"div\",{\"data-testid\":\"spinner\",className:\"Spinner\",children:/*#__PURE__*/_jsx(Spinner,{animation:\"border\",variant:\"primary\"})});}return/*#__PURE__*/_jsx(\"div\",{id:\"app-container\",children:/*#__PURE__*/_jsx(BrowserRouter,{children:/*#__PURE__*/_jsxs(UserContext.Provider,{value:{user:user,setUser:setUser},children:[/*#__PURE__*/_jsx(Header,{}),/*#__PURE__*/_jsxs(Switch,{children:[/*#__PURE__*/_jsx(Route,{component:LandingPage,exact:true,path:\"/\"}),/*#__PURE__*/_jsx(Route,{component:Login,exact:true,path:\"/login\"}),/*#__PURE__*/_jsx(Route,{component:Register,exact:true,path:\"/register\"}),/*#__PURE__*/_jsx(Route,{component:ResetPassword,exact:true,path:\"/resetPassword\"}),/*#__PURE__*/_jsx(Route,{component:NewPassword,exact:true,path:\"/reset/:resetToken\"}),/*#__PURE__*/_jsx(Route,{component:LeaderBoard,exact:true,path:\"/g/leaderboard\"}),/*#__PURE__*/_jsx(Route,{component:Computer,exact:true,path:\"/g/computer\"}),/*#__PURE__*/_jsx(Route,{component:Game,exact:true,path:\"/g/:gameId\"}),/*#__PURE__*/_jsx(Route,{component:UpdateProfile,exact:true,path:\"/u/updateProfile\"}),/*#__PURE__*/_jsx(Route,{component:UserProfile,exact:true,path:\"/u/:userId\"}),/*#__PURE__*/_jsx(Route,{component:MatchHistory,exact:true,path:\"/u/:userId/matches\"}),/*#__PURE__*/_jsx(Route,{component:Rating,exact:true,path:\"/u/:userId/rating\"}),/*#__PURE__*/_jsx(Route,{component:ConfirmationPage,exact:true,path:\"/u/confirmation/:token\"}),/*#__PURE__*/_jsx(Route,{component:function component(){return\"404 Page not found\";},path:\"*\"})]})]})})});}export default App;","map":{"version":3,"names":["useState","useEffect","BrowserRouter","Route","Switch","useParams","axios","Header","LandingPage","Login","ConfirmationPage","Register","NewPassword","ResetPassword","Game","Computer","LeaderBoard","UserProfile","MatchHistory","UpdateProfile","Rating","UserContext","Spinner","jsx","_jsx","jsxs","_jsxs","_require","require","SERVER_URL","App","_useState","isValid","id","undefined","username","rating","_useState2","_slicedToArray","user","setUser","_useState3","_useState4","isLoading","setIsLoading","checkLoggingStatus","_ref","_asyncToGenerator","_regeneratorRuntime","mark","_callee","token","response","wrap","_callee$","_context","prev","next","localStorage","getItem","post","concat","sent","data","removeItem","t0","stop","apply","arguments","className","children","animation","variant","Provider","value","component","exact","path"],"sources":["/home/mushrambo/projects/eks-chess/chess-front-end/src/App.js"],"sourcesContent":["import { useState, useEffect } from 'react';\nimport { BrowserRouter, Route, Switch, useParams } from 'react-router-dom';\nimport axios from 'axios';\nimport Header from './components/Header';\nimport LandingPage from './components/LandingPage';\nimport Login from './components/Auth/Login';\nimport ConfirmationPage from './components/Auth/ConfirmationPage';\nimport Register from './components/Auth/Register';\nimport NewPassword from './components/Auth/NewPassword';\nimport ResetPassword from './components/Auth/ResetPassword';\nimport Game from './components/Game/Game';\nimport Computer from './components/Game/Computer';\nimport LeaderBoard from './components/Game/LeaderBoard';\nimport UserProfile from './components/User/UserProfile';\nimport MatchHistory from './components/User/MatchHistory';\nimport UpdateProfile from './components/User/UpdateProfile';\nimport Rating from './components/User/Rating';\nimport UserContext from './context/UserContext';\nimport { Spinner } from 'react-bootstrap';\nimport 'bootstrap/dist/css/bootstrap.min.css';\nimport './style.css';\nconst { SERVER_URL } = require('./components/Utils/Config');\n\n\nfunction App() {\n    const [user, setUser] = useState({\n        isValid: false,\n        id: undefined,\n        username: undefined,\n        rating: undefined,\n    });\n    const [isLoading, setIsLoading] = useState(true);\n\n    useEffect(() => {\n        const checkLoggingStatus = async () => {\n            try {\n                const token = localStorage.getItem('token');\n                const response = await axios.post(`${SERVER_URL}/u/verifyToken`, { token: token });\n                if (response.data.isValid) {\n                    setUser((user) => ({\n                        isValid: response.data.isValid,\n                        id: response.data.id,\n                        username: response.data.username,\n                        rating: response.data.rating,\n                    }));\n                } else {\n                    // JWT is not valid, remove it from the browser's storage\n                    localStorage.removeItem('token');\n                }\n                setIsLoading(false);\n            } catch (error) {\n                setIsLoading(false);\n                localStorage.removeItem('token');\n            }\n        };\n        checkLoggingStatus();\n    }, []);\n\n    // if user has logged in or not is not verified yet then show loading spinner.\n    if (isLoading) {\n        return (\n            <div data-testid=\"spinner\" className='Spinner'>\n                <Spinner animation='border' variant='primary' />\n            </div>\n        );\n    }\n\n    return (\n        <div id='app-container'>\n            <BrowserRouter>\n                <UserContext.Provider value={{ user: user, setUser: setUser }}>\n                    <Header />\n                    <Switch>\n                        <Route component={LandingPage} exact path='/' />\n                        <Route component={Login} exact path='/login' />\n                        <Route component={Register} exact path='/register' />\n                        <Route component={ResetPassword} exact path='/resetPassword' />\n                        <Route component={NewPassword} exact path='/reset/:resetToken' />\n                        <Route component={LeaderBoard} exact path='/g/leaderboard' />\n                        <Route component={Computer} exact path='/g/computer' />\n                        <Route component={Game} exact path='/g/:gameId' />\n                        <Route component={UpdateProfile} exact path='/u/updateProfile' />\n                        <Route component={UserProfile} exact path='/u/:userId' />\n                        <Route component={MatchHistory} exact path='/u/:userId/matches' />\n                        <Route component={Rating} exact path='/u/:userId/rating' />\n                        <Route component={ConfirmationPage} exact path='/u/confirmation/:token' />\n                        <Route component={() => \"404 Page not found\"} path=\"*\" />\n                    </Switch>\n                </UserContext.Provider>\n            </BrowserRouter>\n        </div>\n    );\n}\n\nexport default App;\n"],"mappings":"waAAA,OAASA,QAAQ,CAAEC,SAAS,KAAQ,OAAO,CAC3C,OAASC,aAAa,CAAEC,KAAK,CAAEC,MAAM,CAAEC,SAAS,KAAQ,kBAAkB,CAC1E,MAAO,CAAAC,KAAK,KAAM,OAAO,CACzB,MAAO,CAAAC,MAAM,KAAM,qBAAqB,CACxC,MAAO,CAAAC,WAAW,KAAM,0BAA0B,CAClD,MAAO,CAAAC,KAAK,KAAM,yBAAyB,CAC3C,MAAO,CAAAC,gBAAgB,KAAM,oCAAoC,CACjE,MAAO,CAAAC,QAAQ,KAAM,4BAA4B,CACjD,MAAO,CAAAC,WAAW,KAAM,+BAA+B,CACvD,MAAO,CAAAC,aAAa,KAAM,iCAAiC,CAC3D,MAAO,CAAAC,IAAI,KAAM,wBAAwB,CACzC,MAAO,CAAAC,QAAQ,KAAM,4BAA4B,CACjD,MAAO,CAAAC,WAAW,KAAM,+BAA+B,CACvD,MAAO,CAAAC,WAAW,KAAM,+BAA+B,CACvD,MAAO,CAAAC,YAAY,KAAM,gCAAgC,CACzD,MAAO,CAAAC,aAAa,KAAM,iCAAiC,CAC3D,MAAO,CAAAC,MAAM,KAAM,0BAA0B,CAC7C,MAAO,CAAAC,WAAW,KAAM,uBAAuB,CAC/C,OAASC,OAAO,KAAQ,iBAAiB,CACzC,MAAO,sCAAsC,CAC7C,MAAO,aAAa,CAAC,OAAAC,GAAA,IAAAC,IAAA,gCAAAC,IAAA,IAAAC,KAAA,yBACrB,IAAAC,QAAA,CAAuBC,OAAO,CAAC,2BAA2B,CAAC,CAAnDC,UAAU,CAAAF,QAAA,CAAVE,UAAU,CAGlB,QAAS,CAAAC,GAAGA,CAAA,CAAG,CACX,IAAAC,SAAA,CAAwB/B,QAAQ,CAAC,CAC7BgC,OAAO,CAAE,KAAK,CACdC,EAAE,CAAEC,SAAS,CACbC,QAAQ,CAAED,SAAS,CACnBE,MAAM,CAAEF,SACZ,CAAC,CAAC,CAAAG,UAAA,CAAAC,cAAA,CAAAP,SAAA,IALKQ,IAAI,CAAAF,UAAA,IAAEG,OAAO,CAAAH,UAAA,IAMpB,IAAAI,UAAA,CAAkCzC,QAAQ,CAAC,IAAI,CAAC,CAAA0C,UAAA,CAAAJ,cAAA,CAAAG,UAAA,IAAzCE,SAAS,CAAAD,UAAA,IAAEE,YAAY,CAAAF,UAAA,IAE9BzC,SAAS,CAAC,UAAM,CACZ,GAAM,CAAA4C,kBAAkB,6BAAAC,IAAA,CAAAC,iBAAA,cAAAC,mBAAA,GAAAC,IAAA,CAAG,SAAAC,QAAA,MAAAC,KAAA,CAAAC,QAAA,QAAAJ,mBAAA,GAAAK,IAAA,UAAAC,SAAAC,QAAA,iBAAAA,QAAA,CAAAC,IAAA,CAAAD,QAAA,CAAAE,IAAA,SAAAF,QAAA,CAAAC,IAAA,GAEbL,KAAK,CAAGO,YAAY,CAACC,OAAO,CAAC,OAAO,CAAC,CAAAJ,QAAA,CAAAE,IAAA,SACpB,CAAAnD,KAAK,CAACsD,IAAI,IAAAC,MAAA,CAAIhC,UAAU,mBAAkB,CAAEsB,KAAK,CAAEA,KAAM,CAAC,CAAC,QAA5EC,QAAQ,CAAAG,QAAA,CAAAO,IAAA,CACd,GAAIV,QAAQ,CAACW,IAAI,CAAC/B,OAAO,CAAE,CACvBQ,OAAO,CAAC,SAACD,IAAI,QAAM,CACfP,OAAO,CAAEoB,QAAQ,CAACW,IAAI,CAAC/B,OAAO,CAC9BC,EAAE,CAAEmB,QAAQ,CAACW,IAAI,CAAC9B,EAAE,CACpBE,QAAQ,CAAEiB,QAAQ,CAACW,IAAI,CAAC5B,QAAQ,CAChCC,MAAM,CAAEgB,QAAQ,CAACW,IAAI,CAAC3B,MAC1B,CAAC,EAAC,CAAC,CACP,CAAC,IAAM,CACH;AACAsB,YAAY,CAACM,UAAU,CAAC,OAAO,CAAC,CACpC,CACApB,YAAY,CAAC,KAAK,CAAC,CAACW,QAAA,CAAAE,IAAA,iBAAAF,QAAA,CAAAC,IAAA,GAAAD,QAAA,CAAAU,EAAA,CAAAV,QAAA,aAEpBX,YAAY,CAAC,KAAK,CAAC,CACnBc,YAAY,CAACM,UAAU,CAAC,OAAO,CAAC,CAAC,yBAAAT,QAAA,CAAAW,IAAA,MAAAhB,OAAA,gBAExC,kBApBK,CAAAL,kBAAkBA,CAAA,SAAAC,IAAA,CAAAqB,KAAA,MAAAC,SAAA,OAoBvB,CACDvB,kBAAkB,CAAC,CAAC,CACxB,CAAC,CAAE,EAAE,CAAC,CAEN;AACA,GAAIF,SAAS,CAAE,CACX,mBACInB,IAAA,QAAK,cAAY,SAAS,CAAC6C,SAAS,CAAC,SAAS,CAAAC,QAAA,cAC1C9C,IAAA,CAACF,OAAO,EAACiD,SAAS,CAAC,QAAQ,CAACC,OAAO,CAAC,SAAS,CAAE,CAAC,CAC/C,CAAC,CAEd,CAEA,mBACIhD,IAAA,QAAKS,EAAE,CAAC,eAAe,CAAAqC,QAAA,cACnB9C,IAAA,CAACtB,aAAa,EAAAoE,QAAA,cACV5C,KAAA,CAACL,WAAW,CAACoD,QAAQ,EAACC,KAAK,CAAE,CAAEnC,IAAI,CAAEA,IAAI,CAAEC,OAAO,CAAEA,OAAQ,CAAE,CAAA8B,QAAA,eAC1D9C,IAAA,CAACjB,MAAM,GAAE,CAAC,cACVmB,KAAA,CAACtB,MAAM,EAAAkE,QAAA,eACH9C,IAAA,CAACrB,KAAK,EAACwE,SAAS,CAAEnE,WAAY,CAACoE,KAAK,MAACC,IAAI,CAAC,GAAG,CAAE,CAAC,cAChDrD,IAAA,CAACrB,KAAK,EAACwE,SAAS,CAAElE,KAAM,CAACmE,KAAK,MAACC,IAAI,CAAC,QAAQ,CAAE,CAAC,cAC/CrD,IAAA,CAACrB,KAAK,EAACwE,SAAS,CAAEhE,QAAS,CAACiE,KAAK,MAACC,IAAI,CAAC,WAAW,CAAE,CAAC,cACrDrD,IAAA,CAACrB,KAAK,EAACwE,SAAS,CAAE9D,aAAc,CAAC+D,KAAK,MAACC,IAAI,CAAC,gBAAgB,CAAE,CAAC,cAC/DrD,IAAA,CAACrB,KAAK,EAACwE,SAAS,CAAE/D,WAAY,CAACgE,KAAK,MAACC,IAAI,CAAC,oBAAoB,CAAE,CAAC,cACjErD,IAAA,CAACrB,KAAK,EAACwE,SAAS,CAAE3D,WAAY,CAAC4D,KAAK,MAACC,IAAI,CAAC,gBAAgB,CAAE,CAAC,cAC7DrD,IAAA,CAACrB,KAAK,EAACwE,SAAS,CAAE5D,QAAS,CAAC6D,KAAK,MAACC,IAAI,CAAC,aAAa,CAAE,CAAC,cACvDrD,IAAA,CAACrB,KAAK,EAACwE,SAAS,CAAE7D,IAAK,CAAC8D,KAAK,MAACC,IAAI,CAAC,YAAY,CAAE,CAAC,cAClDrD,IAAA,CAACrB,KAAK,EAACwE,SAAS,CAAExD,aAAc,CAACyD,KAAK,MAACC,IAAI,CAAC,kBAAkB,CAAE,CAAC,cACjErD,IAAA,CAACrB,KAAK,EAACwE,SAAS,CAAE1D,WAAY,CAAC2D,KAAK,MAACC,IAAI,CAAC,YAAY,CAAE,CAAC,cACzDrD,IAAA,CAACrB,KAAK,EAACwE,SAAS,CAAEzD,YAAa,CAAC0D,KAAK,MAACC,IAAI,CAAC,oBAAoB,CAAE,CAAC,cAClErD,IAAA,CAACrB,KAAK,EAACwE,SAAS,CAAEvD,MAAO,CAACwD,KAAK,MAACC,IAAI,CAAC,mBAAmB,CAAE,CAAC,cAC3DrD,IAAA,CAACrB,KAAK,EAACwE,SAAS,CAAEjE,gBAAiB,CAACkE,KAAK,MAACC,IAAI,CAAC,wBAAwB,CAAE,CAAC,cAC1ErD,IAAA,CAACrB,KAAK,EAACwE,SAAS,CAAE,SAAAA,UAAA,QAAM,oBAAoB,EAAC,CAACE,IAAI,CAAC,GAAG,CAAE,CAAC,EACrD,CAAC,EACS,CAAC,CACZ,CAAC,CACf,CAAC,CAEd,CAEA,cAAe,CAAA/C,GAAG"},"metadata":{},"sourceType":"module","externalDependencies":[]}